<mxGraphModel>
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>

    <!-- Title -->
    <mxCell id="title" value="SQL Query Execution Flow" style="text;fontSize=16;fontStyle=1;fontColor=#374151;align=center;verticalAlign=middle;" vertex="1" parent="1">
      <mxGeometry x="220" y="10" width="360" height="30" as="geometry"/>
    </mxCell>

    <!-- Step 1: Write SQL -->
    <mxCell id="s1" value="SQL 작성&#xa;Write SQL" style="rounded=1;fillColor=#dbeafe;strokeColor=#3b82f6;fontColor=#1e40af;fontSize=12;fontStyle=1;whiteSpace=wrap;shadow=1;arcSize=20;" vertex="1" parent="1">
      <mxGeometry x="40" y="60" width="110" height="65" as="geometry"/>
    </mxCell>
    <mxCell id="s1-sub" value="CodeMirror 6&#xa;Syntax Highlight" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="40" y="128" width="110" height="30" as="geometry"/>
    </mxCell>

    <!-- Step 2: Validate -->
    <mxCell id="s2" value="권한 검증&#xa;Validate" style="rounded=1;fillColor=#fef3c7;strokeColor=#f59e0b;fontColor=#92400e;fontSize=12;fontStyle=1;whiteSpace=wrap;shadow=1;arcSize=20;" vertex="1" parent="1">
      <mxGeometry x="195" y="60" width="110" height="65" as="geometry"/>
    </mxCell>
    <mxCell id="s2-sub" value="Level-based&#xa;SQL Permissions" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="195" y="128" width="110" height="30" as="geometry"/>
    </mxCell>

    <!-- Step 3: Route -->
    <mxCell id="s3" value="DB 라우팅&#xa;Route" style="rhombus;fillColor=#ede9fe;strokeColor=#8b5cf6;fontColor=#5b21b6;fontSize=11;fontStyle=1;whiteSpace=wrap;shadow=1;" vertex="1" parent="1">
      <mxGeometry x="340" y="50" width="120" height="85" as="geometry"/>
    </mxCell>
    <mxCell id="s3-sub" value="PostgreSQL / MySQL" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="345" y="138" width="110" height="20" as="geometry"/>
    </mxCell>

    <!-- Step 4: Execute -->
    <mxCell id="s4" value="쿼리 실행&#xa;Execute" style="rounded=1;fillColor=#d1fae5;strokeColor=#10b981;fontColor=#065f46;fontSize=12;fontStyle=1;whiteSpace=wrap;shadow=1;arcSize=20;" vertex="1" parent="1">
      <mxGeometry x="505" y="60" width="110" height="65" as="geometry"/>
    </mxCell>
    <mxCell id="s4-sub" value="Docker DB&#xa;5s Timeout" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="505" y="128" width="110" height="30" as="geometry"/>
    </mxCell>

    <!-- Step 5: Grade -->
    <mxCell id="s5" value="결과 채점&#xa;Grade" style="rounded=1;fillColor=#ffe4e6;strokeColor=#f43f5e;fontColor=#9f1239;fontSize=12;fontStyle=1;whiteSpace=wrap;shadow=1;arcSize=20;" vertex="1" parent="1">
      <mxGeometry x="660" y="60" width="110" height="65" as="geometry"/>
    </mxCell>
    <mxCell id="s5-sub" value="exact / unordered&#xa;/ contains" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="660" y="128" width="110" height="30" as="geometry"/>
    </mxCell>

    <!-- Step 6: Feedback (below, centered) -->
    <mxCell id="s6" value="피드백 / Feedback" style="rounded=1;fillColor=#ccfbf1;strokeColor=#14b8a6;fontColor=#134e4a;fontSize=12;fontStyle=1;whiteSpace=wrap;shadow=1;arcSize=20;" vertex="1" parent="1">
      <mxGeometry x="330" y="195" width="140" height="55" as="geometry"/>
    </mxCell>
    <mxCell id="s6-sub" value="Score + Hints + Explanation" style="text;fontSize=9;fontColor=#6b7280;align=center;" vertex="1" parent="1">
      <mxGeometry x="325" y="253" width="150" height="20" as="geometry"/>
    </mxCell>

    <!-- Edges: horizontal flow -->
    <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#3b82f6;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;" edge="1" source="s1" target="s2" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#f59e0b;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;" edge="1" source="s2" target="s3" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#8b5cf6;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;" edge="1" source="s3" target="s4" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#10b981;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;" edge="1" source="s4" target="s5" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e5" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#f43f5e;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;exitX=0.5;exitY=1;entryX=1;entryY=0.5;" edge="1" source="s5" target="s6" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e6" value="return" style="edgeStyle=orthogonalEdgeStyle;strokeColor=#14b8a6;strokeWidth=2;endArrow=blockThin;endFill=1;flowAnimation=1;curved=1;dashed=1;exitX=0;exitY=0.5;entryX=0.5;entryY=1;" edge="1" source="s6" target="s1" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
  </root>
</mxGraphModel>